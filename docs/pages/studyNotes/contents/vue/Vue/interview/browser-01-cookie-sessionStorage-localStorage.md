# cookie, sessionStorage 和 localStorage 的差異

## cookie

- 存儲容量：
  一般限制約 4KB，因此適合存放少量數據（如身份驗證資訊）。

- 資料傳輸：
  每次 HTTP 請求都會自動攜帶 Cookie 資料，適合用來保持伺服器端會話（session）。

- 生命週期：
  可設定有效期限或設為會話級別（關閉瀏覽器後失效）。

- 安全性與設定：
  可以設置 HttpOnly（防止 JavaScript 存取）、Secure（僅透過 HTTPS 傳送）、SameSite（跨站請求控制）等屬性，以增強安全性。

- 適用場景：
  用於身份驗證、追蹤用戶狀態，或與伺服器交換少量資料。

## sessionStorage

- 存儲容量：
  一般容量較大（通常 5MB 左右），適合存放較多資料，但依瀏覽器不同而略有差異。

- 資料生命週期：
  只在同一個瀏覽器分頁（或窗口）有效，當分頁或窗口關閉後，資料會被清除。

- 範圍與隔離：
  每個分頁或窗口有獨立的 sessionStorage，不同分頁之間不共享資料。

- 資料傳輸：
  資料僅存在於客戶端，不會自動隨 HTTP 請求發送給伺服器。

- 適用場景：
  適用於需要在單一分頁中保持狀態（例如表單資料暫存、臨時設定等）的情況。

## localStorage

- 存儲容量：
  與 sessionStorage 類似，一般也有約 5MB 的容量，但具體上限依瀏覽器而定。

- 資料生命週期：
  儲存資料持久化，即使關閉瀏覽器或電腦重新啟動，資料依然保留，直到明確清除。

- 範圍與共享：
  同一個來源（同協議、網域、端口）下，所有分頁或窗口共享同一份 localStorage 資料。

- 資料傳輸：
  同樣不會自動隨 HTTP 請求傳送給伺服器。

- 適用場景：
  適用於存放長期使用的資料，如用戶偏好設定、緩存資料、應用狀態等。

## 差異表

| 特性     | Cookie                            | SessionStorage                       | LocalStorage                       |
| -------- | --------------------------------- | ------------------------------------ | ---------------------------------- |
| 存儲容量 | 一般限制約 4KB                    | 約 5MB（依瀏覽器而定）               | 約 5MB（依瀏覽器而定）             |
| 生命週期 | 可設定有效期限                    | 分頁/窗口關閉即失效                  | 儲存資料持久化，直到明確清除       |
| 資料傳輸 | 每次 HTTP 請求都會發送            | 僅存在客戶端，不會隨 HTTP 請求發送   | 僅存在客戶端，不會隨 HTTP 請求發送 |
| 適用場景 | 身份驗證、追蹤用戶狀態            | 單一分頁中保持狀態                   | 長期使用的資料                     |
| 作用範圍 | 可設定 domain 與 path，適用於全站 | 僅限於單一分頁或窗口                 | 同一來源下所有分頁共享             |
| 安全性   | 可設置 HttpOnly、Secure、SameSite | 無法從伺服器層面控制，容易被 JS 讀取 | 同 sessionStorage，容易受 XSS 攻擊 |
